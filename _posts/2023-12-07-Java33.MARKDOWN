---
title: "[Java] [Test] JUnit í”„ë ˆì„ì›Œí¬"
excerpt: "Java Test code ì‚¬ìš©"

categories:
 - Java
tags:
 - Java

date: 2023-12-07T00:00:00Z
toc: true
toc_sticky: true
toc_label: ëª©ì°¨
---
<aside>
ğŸ’¡ JUnit í”„ë ˆì„ì›Œí¬ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ í•´ë³´ì
</aside>

> JUnit í”„ë ˆì„ì›Œí¬ë¡œ í…ŒìŠ¤íŠ¸ ì‘ì„±

1. src/test/íŒŒì¼ê²½ë¡œ/í´ë˜ìŠ¤ë„¤ì„Testë¡œ íŒŒì¼ ë§Œë“¤ê¸°
2. @Test ì–´ë…¸í…Œì´ì…˜ ë¶™ì´ê³  ì‹¤í–‰í•  í•¨ìˆ˜ ë§Œë“¤ê¸°
3. í…ŒìŠ¤íŠ¸ ì½”ë“œ ì…ë ¥ í›„ assertThat ìœ¼ë¡œ ê²€ì¦
  3-1. í…ŒìŠ¤íŠ¸í•  ì›ë³¸ ì„ ì–¸
  3-2. given, when, then ì…‹ ì„ ê²€ì¦

      ```java
      //given
              Member member1 = new Member();
              member1.setName("newName1");
              Member member2 = new Member();
              member2.setName("newName1");

              //when
                  //ë°©ë²•1 : try catch
      /*          memberService.join(member1);
            try {
                  memberService.join(member2);
                  fail("ì˜ˆì™¸ê°€ ë°œìƒí•´ì•¼í•©ë‹ˆë‹¤");

              } catch (IllegalStateException e) {
                  // ì„±ê³µ
                  // assertThat(e.getMessage()).isEqualTo("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” íšŒì›ì…ë‹ˆë‹¤.");
                  //ì‹¤íŒ¨
                  assertThat(e.getMessage()).isEqualTo("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” íšŒì›ì…ë‹ˆë‹¤.");
              }*/

                  //ë°©ë²•2
              memberService.join(member1);
              IllegalStateException e = assertThrows(IllegalStateException.class, () -> memberService.join(member2));

              //then
              assertThat(e.getMessage()).isEqualTo("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” íšŒì›ì…ë‹ˆë‹¤.");
      ```

4. ì—¬ëŸ¬ í•¨ìˆ˜ë¥¼ ë™ì‹œì— í…ŒìŠ¤íŠ¸ í•  ê²½ìš° í…ŒìŠ¤íŠ¸ í•˜ëŠ” ì›ë³¸ íŒŒì¼ì— clearStoreí•¨ìˆ˜ ì‘ì„± í›„ í…ŒìŠ¤íŠ¸íŒŒì¼ì— @AfterEachì–´ë…¸í…Œì´ì…˜ê³¼ í•¨ìˆ˜ ì‘ì„± í›„ í´ë¦¬ì–´ ì ìš©
  4-1. clearí•¨ìˆ˜ ìˆëŠ” class ì—ì„œ test í•  ë•Œ

  ```java

  -----------------------ì›ë³¸ íŒŒì¼ì—ì„œ í…ŒìŠ¤íŠ¸ê´€ë ¨ ì½”ë“œ
  public void clearStore() {
          store.clear();
      }
  }
  ----------------------------------------Test File
  package com.kpgoing.deliveryplatform.repository;

  import com.kpgoing.deliveryplatform.domain.Member;
  import org.junit.jupiter.api.AfterEach;
  import org.junit.jupiter.api.Test;

  import java.util.List;

  import static org.assertj.core.api.Assertions.assertThat;
  class MemoryMemberRepositoryTest {

      MemoryMemberRepository repository = new MemoryMemberRepository();

      @AfterEach
      public void afterEach() {
          repository.clearStore();
      }

      @Test
      public void save() {
          Member member = new Member();
          member.setName("testGo");

          //êº¼ë‚´ê¸°
          repository.save(member);
          Member result =  repository.findById(member.getId()).get();

          //ê²€ì¦1 = log ê¸€ìë¡œ í™•ì¸ - ë³´ê¸° í˜ë“¦
          //System.out.println("result = " + (result == member));

          //ê²€ì¦2 = assertions.assertEquals
          //Assertions.assertEquals(member, result);

          //ê²€ì¦2 = assertions.org asserti
          assertThat(member).isEqualTo(result);

          //ì‹¤ë¬´ì—ì„œëŠ” build íˆ´ì´ë‘ ì—®ì–´ì„œ ì˜¤ë¥˜ë©´ ë‹¤ìŒ ë‹¨ê³„ë¡œ ëª»ë„˜ì–´ê°€ê²Œ ë§‰ìŒ
      }

      @Test
      public void findByName() {
          Member member1 = new Member();
          member1.setName("name1");
          repository.save(member1);

          Member member2 = new Member();
          member2.setName("name22");
          repository.save(member2);

          Member result = repository.findByName("name1").get();

          assertThat(result).isEqualTo(member1);

      }

      @Test
      public void findAll() {
          Member member1 = new Member();
          member1.setName("name1");
          repository.save(member1);

          Member member2 = new Member();
          member2.setName("name22");
          repository.save(member2);

          List<Member> result = repository.findAll();
          assertThat(result.size()).isEqualTo(2);
      }
  }
  ```

4-2. clearí•¨ìˆ˜ ì—†ëŠ” ë‹¤ë¥¸ class  í•¨ìˆ˜ - ì˜ì¡´ì„±ì£¼ì…ìœ¼ë¡œ ê°™ì€ ê°ì²´ ì‚¬ìš©
  4-2-1. service(í…ŒìŠ¤íŠ¸í•  íŒŒì¼)ì— ì˜ì¡´ì„± ì£¼ì…í•´ì„œ


    private final MemberRepository memberRepository;
        public MemberService(MemberRepository memberRepository) {
            this.memberRepository = memberRepository;
        }


  4-2-2. testì—ì„œ ê°€ì ¸ì™€ì„œ ì‚¬ìš©


    package com.kpgoing.deliveryplatform.service;

    import com.kpgoing.deliveryplatform.domain.Member;
    import com.kpgoing.deliveryplatform.repository.MemoryMemberRepository;
    import org.junit.jupiter.api.AfterEach;
    import org.junit.jupiter.api.BeforeEach;
    import org.junit.jupiter.api.Test;

    import static org.assertj.core.api.Assertions.assertThat;
    import static org.junit.jupiter.api.Assertions.assertThrows;

    class MemberServiceTest {

        MemberService memberService;
        MemoryMemberRepository memberRepository;

        //afterEachë¥¼ ì¨ì•¼í•˜ëŠ”ë° ì„œë¹„ìŠ¤ì—ëŠ” í•´ë‹¹ í•¨ìˆ˜ê°€ ì—†ìŒ
        //MemberService memberService = new MemberService();
        //MemoryMemberRepository memberRepository = new MemoryMemberRepository();
        // ì´ë ‡ê²Œ new ë¡œ ë”°ë¡œ MemoryMemberRepositoryë¥¼ ì„ ì–¸í•˜ë©´ ìƒˆë¡œìš´ ê°ì²´ë¥¼ ë§Œë“œëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì—
        // MemberServiceì—ì„œ ì‚¬ìš©í•˜ëŠ” MemoryMemberRepositoryì™€ëŠ” ë‹¤ë¥¸ ê²Œ ë¨
        //ê°™ì€ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì“°ë„ë¡ ë°”ê¿”ì•¼í•¨
        // 1) service ë¡œ ê°€ì„œ ì™¸ë¶€ì—ì„œ MemoryMemberRepositoryë¥¼ ë„£ì–´ì£¼ë„ë¡ ë°”ê¿”ì•¼ í•¨
        // 2) before eachë¡œ ì¶”ê°€

        @BeforeEach
        public void beforeEach() {
            memberRepository = new MemoryMemberRepository();
            memberService = new MemberService(memberRepository);
        }

        @AfterEach
        public void afterEach() {
            memberRepository.clearStore();
        }

        @Test
        void íšŒì›ê°€ì…() {
            //given
            Member member = new Member();
            member.setName("newName1");

            //when
            Long saveId = memberService.join(member);

            //then
            Member findMember = memberService.findOne(saveId).get();

            assertThat(member.getName()).isEqualTo(findMember.getName());
        }

        @Test
        public void ì¤‘ë³µíšŒì›ì˜ˆì™¸() {
            //given
            Member member1 = new Member();
            member1.setName("newName1");
            Member member2 = new Member();
            member2.setName("newName1");

            //when
                //ë°©ë²•1
    /*          memberService.join(member1);
          try {
                memberService.join(member2);
                fail("ì˜ˆì™¸ê°€ ë°œìƒí•´ì•¼í•©ë‹ˆë‹¤");

            } catch (IllegalStateException e) {
                // ì„±ê³µ
                // assertThat(e.getMessage()).isEqualTo("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” íšŒì›ì…ë‹ˆë‹¤.");
                //ì‹¤íŒ¨
                assertThat(e.getMessage()).isEqualTo("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” íšŒì›ì…ë‹ˆë‹¤.");
            }*/

                //ë°©ë²•2
            memberService.join(member1);
            IllegalStateException e = assertThrows(IllegalStateException.class, () -> memberService.join(member2));

            //then
            assertThat(e.getMessage()).isEqualTo("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” íšŒì›ì…ë‹ˆë‹¤.");

        }

        @Test
        void ë©¤ë²„ì°¾ê¸°() {
        }

        @Test
        void findOne() {
        }
    }



## ì°¸ê³ 

---


- ìë°”ì˜ ì •ì„
- [ê°•ì˜](https://www.tcpschool.com/java]

-